{% extends "base.html" %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        {% block title %} storelist {% endblock %}
    </title>
    {% block content %}
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.4.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/storelist.css')}}">
</head>

<body>

    <div class="page">

        <!-- Breadcrumb -->
        <div class="breadcrumbs">
            Dashboard / Store Management / <span>Employee List</span>
        </div>

        <!-- Title + Add Store -->
        <div class="top-row">
            <h2>Store List</h2>
            <a class="btn-add" href="{{ url_for('addstore.addstore')}}">Add Stores</a>

        </div>

        <!-- Filters -->
        <form id="filterForm" action="{{ url_for('storelist.filter_store')}}" method="POST">
        <div class="filters">
            <div class="input-box">
                <input type="text" name="store_name" id="store_name" placeholder="Store Name" value="{{ store_name or '' }}">
                <i class="ri-search-line"></i>
            </div>

            <div class="input-box">
                <input name="date" id="date" type="date" value="{{ date or '' }}">
                <i class="ri-calendar-2-line"></i>
            </div>
            
            <button type="submit" class="filter-btn" style="padding: 0.75rem 1.5rem; background: var(--primary, #005dfa); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                <i class="ri-filter-line"></i> Filter
            </button>
            
            {% if store_name or date %}
            <a href="{{ url_for('storelist.storelist') }}" class="clear-btn" style="padding: 0.75rem 1.5rem; background: #f5f7fb; color: var(--text-dark, #0f172a); border: 1px solid #e2e8f0; border-radius: 8px; cursor: pointer; font-weight: 600; text-decoration: none; display: inline-block;">
                <i class="ri-close-line"></i> Clear
            </a>
            {% endif %}
        </div>
        </form>

        <!-- Table -->
        <div class="table-container">
            <table id="storeTable">
                <thead>
                    <tr>
                        <th><input type="checkbox"></th>
                        <th>ID</th>
                        <th>Store Name</th>
                        <th>Email</th>
                        <th>Address</th>
                        <th>Contact</th>
                        <th>Create_at</th>
                        <th>Actions</th>
                    </tr>

                </thead>

                <tbody id="tableBody">
                    {% for i in stores.items %}
                    <tr>
                        <td><input type="checkbox"></td>
                        <td>{{ i.id }}</td>
                        <td>{{ i.store_name }}</td>
                        <td>{{ i.email }}</td>
                        <td>
                            {{ i.address_name }},
                            {{ i.street_name }},
                            {{ i.town }},
                            {{ i.locality }},
                            {{ i.post_code }}
                        </td>
                        <td>{{ i.contact1 }}</td>
                        <td>{{ i.created_at.strftime('%d-%m-%Y') }}</td>
                        <td class="actions">
                            <a href="#" class="edit-btn" data-id="{{ i.id }}" data-tooltip="Edit Store" title="Edit Store"><i class="ri-edit-line"></i></a>
                            <a href="{{ url_for('storelist.delete_store', id=i.id)}}" class="delete-btn" data-tooltip="Delete Store" title="Delete Store" onclick="return confirm('Are you sure you want to delete this store?');"><i class="ri-delete-bin-line"></i></a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>

            </table>
        </div>

        <!-- Pagination -->
        <div class="pagination">
            {% if stores.has_prev %}
            <a href="{{ url_for('storelist.storelist', page=stores.prev_num, store_name=store_name, date=date) }}" class="page-btn">Previous</a>
            {% else %}
            <span class="page-btn disabled">Previous</span>
            {% endif %}

            <span class="page-info">Page {{ stores.page }} of {{ stores.pages }}</span>

            {% if stores.has_next %}
            <a href="{{ url_for('storelist.storelist', page=stores.next_num, store_name=store_name, date=date) }}" class="page-btn">Next</a>
            {% else %}
            <span class="page-btn disabled">Next</span>
            {% endif %}
        </div>

    </div>
    <!-- Edit Store Modal -->

        <!-- Beautiful Edit Store Modal -->
        <div class="edit-modal" id="editModal">
            <div class="edit-modal-content animate-modal">

                <div class="modal-header">
                    <h2>Edit Store</h2>
                    <button class="close-modal-btn" id="closeModalBtn">&times;</button>
                </div>

                <form id="editStoreForm" method="POST" action="{{ url_for('storelist.update_store') }}">

                    <input type="hidden" name="id" id="edit_id">

                    <div class="form-grid">

                        <div class="form-group">
                            <label><i class="ri-store-2-line"></i> Store Name</label>
                            <input type="text" name="store_name" id="edit_store_name">
                        </div>

                        <div class="form-group">
                            <label><i class="ri-mail-line"></i> Email</label>
                            <input type="email" name="email" id="edit_email">
                        </div>

                        <div class="form-group">
                            <label><i class="ri-map-pin-line"></i> Address Name</label>
                            <input type="text" name="address_name" id="edit_address_name">
                        </div>

                        <div class="form-group">
                            <label><i class="ri-road-map-line"></i> Street Name</label>
                            <input type="text" name="street_name" id="edit_street_name">
                        </div>

                        <div class="form-group">
                            <label><i class="ri-community-line"></i> Town</label>
                            <input type="text" name="town" id="edit_town">
                        </div>

                        <div class="form-group">
                            <label><i class="ri-building-2-line"></i> Locality</label>
                            <input type="text" name="locality" id="edit_locality">
                        </div>

                        <div class="form-group">
                            <label><i class="ri-barcode-line"></i> Post Code</label>
                            <input type="text" name="post_code" id="edit_post_code">
                        </div>

                        <div class="form-group">
                            <label><i class="ri-phone-line"></i> Contact 1</label>
                            <input type="text" name="contact1" id="edit_contact1">
                        </div>

                        <div class="form-group">
                            <label><i class="ri-phone-fill"></i> Contact 2</label>
                            <input type="text" name="contact2" id="edit_contact2">
                        </div>

                    </div>

                    <div class="modal-footer">
                        <button type="button" class="cancel-btn" id="closeModal">Cancel</button>
                        <button type="submit" class="save-btn">Save Changes</button>
                    </div>
                </form>

            </div>
        </div>
        </div>
    

    <script src="{{ url_for('static', filename=('js/storelist.js'))}}"></script>
</body>

</html>
{% endblock %}